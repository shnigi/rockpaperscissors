<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="format-detection" content="telephone=no" />
  <meta name="msapplication-tap-highlight" content="no" />
  <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />
  <!--JavaScript-->
  <script src="js/jquery-2.1.3.min.js"></script>
  <script src="js/jquery.mobile-1.4.5.min.js"></script>
  <script src="js/swipe.js"></script>
  <script src="js/shake.js"></script>
  <!--Style-->
  <link rel="stylesheet" type="text/css" href="css/style.css">
  <link rel="stylesheet" type="text/css" href="css/shake.css">
  <link rel="stylesheet" href="css/jquery.mobile-1.4.5.min.css">
  <title>Rock-paper-scissors</title>
</head>
<body>

  <div data-role="page" id="pageone">
    <div data-role="header">
      <h1>Rock-paper-scissors</h1>
    </div>

    <div data-role="main" class="ui-content">

<!--Kuvien luokaksi voi laittaa responsive-image -->
      <div id='mySwipe' class='swipe'>
        <div class='swipe-wrap'>
          <div><b><img src="img/kivi.png" alt="kivi" class="shake"></b></div>
          <div><b><img src="img/papru.png" alt="paperi" class="shake"></b></div>
          <div><b><img src="img/saksi.png" alt="sakset" class="shake"></b></div>
        </div>
      </div>

      <div style='text-align:center;padding-top:20px;'>
        <h2 id="scoreboard">Your score: 0</h2>
        <button onclick="aseValinta();" data-role="button" data-inline="true" data-icon="check">Fight</button>
        <button onclick="mySwipe.next()" data-role="button" data-inline="true" data-icon="arrow-r">Next</button>
        <a href="javascript:history.go(0)" data-role="button" data-inline="true" data-icon="recycle">Refresh</a>
      </div>

    </div>
    <!--Content ends-->


    <!-- Start of footer -->
    <div data-role="footer">
      <h1>Created by Niki Ahlskog 2015</h1>
    </div>
  </div> <!-- Page one ends -->

  <!--Ladataan dialogi kun sivu avataan-->
  <script>
  $(document).ready(function() {
    //Ladataan popup boxi
    $.mobile.changePage( "#pagetwo", { transition: "slideup", changeHash: false });
    //ladataan swipetoosa
    var elem = document.getElementById('mySwipe');
    window.mySwipe = Swipe(elem, {
    });
  });
  </script>

  <!--Dialogiboxi-->
  <div data-role="page" data-dialog="true" id="pagetwo">
    <div data-role="main" class="ui-content dialogi dialog-center">
      <h1>Rock-paper-scissors mobile! </h1>
      <p>Swipe left or right to select your weapon</p>
      <img src="img/swipe.png" alt="swipe">
      <p> shake your phone to fight! </p>
      <img src="img/shake.png" alt="shake">
      <p>If the game doesn't load for some reason, please press refresh and try again!</p>
      <img src="img/refresh.png" alt="refresh">
      <a href="#pageone" id="okbutton"><button>Ok!</button></a>
    </div>
  </div>
  <!--Dialogiboxi loppuu-->



  <!-- Kivi vs kivi-->
  <div data-role="page" id="pagethree">
    <div data-role="header">
      <h1>Battle!</h1>
    </div>

    <div data-role="main" class="ui-content">

      <div class="ui-grid-a">
        <div class="ui-block-a fade-in one textcenter"><img src="img/kivi.png" alt="kivi" class="responsive-image shake"><h3>You selected rock</h3></div>
        <div class="ui-block-b fade-in two textcenter"><img src="img/kivi.png" alt="kivi" class="responsive-image shake"><h3>Opponent selected rock</h3></div>
      </div><!-- /grid-a -->
      <h1 class="textcenter fade-in three">It's a tie!</h1>
      <a href="#pageone" data-transition="slide" data-direction="reverse"><button>Play again!</button></a>
    </div>
  </div>



  <!-- Kivi vs paperi -->
  <div data-role="page" id="pagefour">
    <div data-role="header">
      <h1>Battle!</h1>
    </div>

    <div data-role="main" class="ui-content">
      <div class="ui-grid-a">
        <div class="ui-block-a fade-in one textcenter"><img src="img/kivi.png" alt="kivi" class="responsive-image shake"><h3>You selected rock</h3></div>
        <div class="ui-block-b fade-in two textcenter"><img src="img/papru.png" alt="paperi" class="responsive-image shake"><h3>Opponent selected paper</h3></div>
      </div><!-- /grid-a -->
      <h1 class="textcenter fade-in three">You lose, paper wins!</h1>
      <a href="#pageone" data-transition="slide" data-direction="reverse"><button>Play again!</button></a>
    </div>
  </div>

  <!-- Kivi vs sakset -->
  <div data-role="page" id="pagefive">
    <div data-role="header">
      <h1>Battle!</h1>
    </div>

    <div data-role="main" class="ui-content">
      <div class="ui-grid-a">
        <div class="ui-block-a fade-in one textcenter"><img src="img/kivi.png" alt="kivi" class="responsive-image shake"><h3>You selected rock</h3></div>
        <div class="ui-block-b fade-in two textcenter"><img src="img/saksi.png" alt="sakset" class="responsive-image shake"><h3>Opponent selected scissors</h3></div>
      </div><!-- /grid-a -->
      <h1 class="textcenter fade-in three">You win!</h1>
      <a href="#pageone" data-transition="slide" data-direction="reverse"><button>Play again!</button></a>
    </div>
  </div>

  <!-- paperi vs kivi -->
  <div data-role="page" id="pagesix">
    <div data-role="header">
      <h1>Battle!</h1>
    </div>

    <div data-role="main" class="ui-content">
      <div class="ui-grid-a">
        <div class="ui-block-a fade-in one textcenter"><img src="img/papru.png" alt="paperi" class="responsive-image shake"><h3>You selected paper</h3></div>
        <div class="ui-block-b fade-in two textcenter"><img src="img/kivi.png" alt="kivi" class="responsive-image shake"><h3>Opponent selected rock</h3></div>
      </div><!-- /grid-a -->
      <h1 class="textcenter fade-in three">You win!</h1>
      <a href="#pageone" data-transition="slide" data-direction="reverse"><button>Play again!</button></a>
    </div>
  </div>

  <!-- paperi vs paperi -->
  <div data-role="page" id="pageseven">
    <div data-role="header">
      <h1>Battle!</h1>
    </div>

    <div data-role="main" class="ui-content">
      <div class="ui-grid-a">
        <div class="ui-block-a fade-in one textcenter"><img src="img/papru.png" alt="paperi" class="responsive-image shake"><h3>You selected paper</h3></div>
        <div class="ui-block-b fade-in two textcenter"><img src="img/papru.png" alt="paperi" class="responsive-image shake"><h3>Opponent selected paper</h3></div>
      </div><!-- /grid-a -->
      <h1 class="textcenter fade-in three">It's a tie!</h1>
      <a href="#pageone" data-transition="slide" data-direction="reverse"><button>Play again!</button></a>
    </div>
  </div>

  <!-- paperi vs sakset -->
  <div data-role="page" id="pageeight">
    <div data-role="header">
      <h1>Battle!</h1>
    </div>

    <div data-role="main" class="ui-content">
      <div class="ui-grid-a">
        <div class="ui-block-a fade-in one textcenter"><img src="img/papru.png" alt="paperi" class="responsive-image shake"><h3>You selected paper</h3></div>
        <div class="ui-block-b fade-in two textcenter"><img src="img/saksi.png" alt="sakset" class="responsive-image shake"><h3>Opponent selected scissors</h3></div>
      </div><!-- /grid-a -->
      <h1 class="textcenter fade-in three">You lose, scissors win!</h1>
      <a href="#pageone" data-transition="slide" data-direction="reverse"><button>Play again!</button></a>
    </div>
  </div>


  <!-- sakset vs kivi -->
  <div data-role="page" id="pagenine">
    <div data-role="header">
      <h1>Battle!</h1>
    </div>

    <div data-role="main" class="ui-content">
      <div class="ui-grid-a">
        <div class="ui-block-a fade-in one textcenter"><img src="img/saksi.png" alt="sakset" class="responsive-image shake"><h3>You selected scissors</h3></div>
        <div class="ui-block-b fade-in two textcenter"><img src="img/kivi.png" alt="kivi" class="responsive-image shake"><h3>Opponent selected rock</h3></div>
      </div><!-- /grid-a -->
      <h1 class="textcenter fade-in three">You lose, rock wins!</h1>
      <a href="#pageone" data-transition="slide" data-direction="reverse"><button>Play again!</button></a>
    </div>
  </div>

  <!-- sakset vs paperi -->
  <div data-role="page" id="pageten">
    <div data-role="header">
      <h1>Battle!</h1>
    </div>

    <div data-role="main" class="ui-content">
      <div class="ui-grid-a">
        <div class="ui-block-a fade-in one textcenter"><img src="img/saksi.png" alt="sakset" class="responsive-image shake"><h3>You selected scissors</h3></div>
        <div class="ui-block-b fade-in two textcenter"><img src="img/papru.png" alt="paperi" class="responsive-image shake"><h3>Opponent selected paper</h3></div>
      </div><!-- /grid-a -->
      <h1 class="textcenter fade-in three">You win!</h1>
      <a href="#pageone" data-transition="slide" data-direction="reverse"><button>Play again!</button></a>
    </div>
  </div>

  <!-- sakset vs sakset -->
  <div data-role="page" id="pageeleven">
    <div data-role="header">
      <h1>Battle!</h1>
    </div>

    <div data-role="main" class="ui-content">
      <div class="ui-grid-a">
        <div class="ui-block-a fade-in one textcenter"><img src="img/saksi.png" alt="sakset" class="responsive-image shake"><h3>You selected scissors</h3></div>
        <div class="ui-block-b fade-in two textcenter"><img src="img/saksi.png" alt="sakset" class="responsive-image shake"><h3>Opponent selected scissors</h3></div>
      </div><!-- /grid-a -->
      <h1 class="textcenter fade-in three">It's a tie!</h1>
      <a href="#pageone" data-transition="slide" data-direction="reverse"><button>Play again!</button></a>
    </div>
  </div>


  <script>
  //Pisteet
  var score = 0;
  //Tarkistetaan mik√§ ase on valittuna
  function aseValinta() {
    var pos = mySwipe.getPos();
    //randomilla tietokoneen ase
    var computerWeapon = Math.random();
    //tietokone <.033 kivi, 0.66 papru, saksi
    //pos 0 = kivi, pos 1 = papru, pos 2 = saksi

    //Logiikka kivelle
    if (pos == "0" && computerWeapon < 0.33){
      //alert("Valitsit kiven, tietokone valitsi kiven");
      setTimeout(function(){  document.getElementById("scoreboard").innerHTML = "Your score: " + score;}, 2000);
      $.mobile.changePage( "#pagethree", { transition: "slide", changeHash: false });
    }
    else if (pos == "0" && computerWeapon >= 0.33 && computerWeapon <= 0.66){
      //alert("Valitsit kiven, tietokone valitsi paperin");
      score --;
      setTimeout(function(){  document.getElementById("scoreboard").innerHTML = "Your score: " + score;}, 2000);
      $.mobile.changePage( "#pagefour", { transition: "slide", changeHash: false });
    }
    else if (pos == "0" && computerWeapon > 0.66){
      //alert("valitsit kiven, tietokone valitsi sakset");
      score ++;
      setTimeout(function(){  document.getElementById("scoreboard").innerHTML = "Your score: " + score;}, 2000);
      $.mobile.changePage( "#pagefive", { transition: "slide", changeHash: false });
    }
    //Logiikka paperille
    else if (pos == "1" && computerWeapon < 0.33){
      //alert("Valitsit paperin, tietokone valitsi kiven");
      score ++;
      setTimeout(function(){  document.getElementById("scoreboard").innerHTML = "Your score: " + score;}, 2000);
      //document.getElementById("scoreboard").innerHTML = "Your score: " + score;
      $.mobile.changePage( "#pagesix", { transition: "slide", changeHash: false });
    }
    else if (pos == "1" && computerWeapon >= 0.33 && computerWeapon <= 0.66){
      //alert("Valitsit paperin, tietokone valitsi paperin");
      setTimeout(function(){  document.getElementById("scoreboard").innerHTML = "Your score: " + score;}, 2000);
      $.mobile.changePage( "#pageseven", { transition: "slide", changeHash: false });
    }
    else if (pos == "1" && computerWeapon > 0.66){
      //alert("valitsit paperin, tietokone valitsi sakset");
      score --;
      setTimeout(function(){  document.getElementById("scoreboard").innerHTML = "Your score: " + score;}, 2000);
      $.mobile.changePage( "#pageeight", { transition: "slide", changeHash: false });
    }
    //Logiikka saksille
    else if (pos == "2" && computerWeapon < 0.33){
      //alert("Valitsit sakset, tietokone valitsi kiven");
      score --;
      setTimeout(function(){  document.getElementById("scoreboard").innerHTML = "Your score: " + score;}, 2000);
      $.mobile.changePage( "#pagenine", { transition: "slide", changeHash: false });
    }
    else if (pos == "2" && computerWeapon >= 0.33 && computerWeapon <= 0.66){
      //alert("Valitsit sakset, tietokone valitsi paperin");
      score ++;
      setTimeout(function(){  document.getElementById("scoreboard").innerHTML = "Your score: " + score;}, 2000);
      $.mobile.changePage( "#pageten", { transition: "slide", changeHash: false });
    }
    else if (pos == "2" && computerWeapon > 0.66){
      //alert("valitsit sakset, tietokone valitsi sakset");
      setTimeout(function(){  document.getElementById("scoreboard").innerHTML = "Your score: " + score;}, 2000);
      $.mobile.changePage( "#pageeleven", { transition: "slide", changeHash: false });
    }
  }




  //ravistustoiminto
  window.onload = function() {
    //create a new instance of shake.js.
    var myShakeEvent = new Shake({
      threshold: 15
    });
    // start listening to device motion
    myShakeEvent.start();
    // register a shake event
    window.addEventListener('shake', shakeEventDidOccur, false);
    //shake event callback
    function shakeEventDidOccur () {
      //put your own code here etc.
      aseValinta();
    }
  };
  </script>

</div>
<!-- Cordova juttuja -->
<script type="text/javascript" src="cordova.js"></script>
<script type="text/javascript" src="js/index.js"></script>
<script type="text/javascript">
app.initialize();
</script>
</body>
</html>
